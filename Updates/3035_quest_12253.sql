-- q.12253 'Rescue from Town Square'

-- Trapped Wintergarde Villager 27359
DELETE FROM creature_movement_template WHERE entry = 27359;
INSERT INTO creature_movement_template (entry, point, position_x, position_y, position_z, orientation, waittime, script_id) VALUES
(27359,1,3711.07,-864.7,162.698,100,0,0),
(27359,2,3727.99,-832.206,166.572,100,0,0),
(27359,3,3763.79,-788.961,195.051,100,100,1);

-- Vengeful Geist 27370
UPDATE creature SET spawndist = 0, MovementType = 2 WHERE guid IN (516606,517966,517967,517968,517971,517972,517973,517978,517979,517980,517981,517982,517989,517996,517998,517999,518000,518001,518002,518004);
DELETE FROM creature_movement WHERE id IN (516606,517966,517967,517968,517971,517972,517973,517978,517979,517980,517981,517982,517989,517996,517998,517999,518000,518001,518002,518004);
INSERT INTO creature_movement (id,point,position_x,position_y,position_z,orientation,waittime,script_id) VALUES
-- 516606
(516606,1,3798.718,-904.7065,162.8575,100,100,11),
(516606,2,3798.718,-904.7065,162.8575,100,200,3),
-- 517966
(517966,1,3674.16,-800.264,174.509,100,100,11),
(517966,2,3674.16,-800.264,174.509,100,200,3),
-- 517967
(517967,1,3679.28,-806.33,164.745,100,100,11),
(517967,2,3679.28,-806.33,164.745,100,200,3),
-- 517968
(517968,1,3686.74,-833.97,165.878,100,100,11),
(517968,2,3686.74,-833.97,165.878,100,200,3),
-- 517971
(517971,1,3687.22,-809.842,174.435,100,100,11),
(517971,2,3687.22,-809.842,174.435,100,200,3),
-- 517972
(517972,1,3674.94,-820.554,164.761,100,100,11),
(517972,2,3674.94,-820.554,164.761,100,200,3),
-- 517973
(517973,1,3646.23,-801.477,164.807,100,100,11),
(517973,2,3646.23,-801.477,164.807,100,200,3),
-- 517978
(517978,1,3689.54,-903.761,176.117,100,100,11),
(517978,2,3689.54,-903.761,176.117,100,200,3),
-- 517979
(517979,1,3751.8,-859.872,163.708,100,100,11),
(517979,2,3751.8,-859.872,163.708,100,200,3),
-- 517980
(517980,1,3689.39,-894.914,176.508,100,100,11),
(517980,2,3689.39,-894.914,176.508,100,200,3),
-- 517981
(517981,1,3705.07,-899.259,164.115,100,100,11),
(517981,2,3705.07,-899.259,164.115,100,200,3),
-- 517982
(517982,1,3688.07,-904.019,164.286,100,100,11),
(517982,2,3688.07,-904.019,164.286,100,200,3),
-- 517989
(517989,1,3721.13,-901.578,164.905,100,100,11),
(517989,2,3721.13,-901.578,164.905,100,200,3),
-- 517996
(517996,1,3740.9,-862.012,171.562,100,100,11),
(517996,2,3740.9,-862.012,171.562,100,200,3),
-- 517998
(517998,1,3622.18,-882.956,164.152,100,100,11),
(517998,2,3622.18,-882.956,164.152,100,200,3),
-- 517999
(517999,1,3629.79,-896.189,164.202,100,100,11),
(517999,2,3629.79,-896.189,164.202,100,200,3),
-- 518000
(518000,1,3694.83,-888.529,164.33,100,100,11),
(518000,2,3694.83,-888.529,164.33,100,200,3),
-- 518001
(518001,1,3651.62,-842.59,166.056,100,100,11),
(518001,2,3651.62,-842.59,166.056,100,200,3),
-- 518002
(518002,1,3661.67,-901.09,162.65,100,100,11),
(518002,2,3661.67,-901.09,162.65,100,200,3),
-- 518004
(518004,1,3705.85,-900.01,175.968,100,100,11),
(518004,2,3705.85,-900.01,175.968,100,200,3);
DELETE FROM dbscripts_on_relay WHERE id IN (20390);
INSERT INTO dbscripts_on_relay (id, delay, command, datalong, datalong2, datalong3, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
(20390,10,31,27370,5,0,27359,50,7 | 0x08,0,0,0,0,0,0,0,0,'Part of Vengeful Geist EAI: buddy search for 27370 - terminate if alive'),
(20390,100,1,0,0,0,27359,40,7,0,0,0,0,0,0,0,0,'Part of Vengeful Geist EAI: buddy emote 0'),
(20390,150,25,1,0,0,27359,40,7,0,0,0,0,0,0,0,0,'Part of Vengeful Geist EAI: buddy Run ON'),
(20390,1000,0,0,10,0,27359,50,7,2000020565,2000020566,2000020567,2000020568,0,0,0,0,'Part of Vengeful Geist EAI: buddy - random say'),
(20390,2000,8,27359,0,0,0,0,0,0,0,0,0,0,0,0,0,'Part of Vengeful Geist EAI: kill credit'),
(20390,3000,20,2,0,0,27359,40,7,0,0,0,0,0,0,0,0,'Part of Vengeful Geist EAI: buddy waypoints');
DELETE FROM dbscript_string WHERE entry BETWEEN 2000020565 AND 2000020568;
INSERT INTO dbscript_string (entry, content_default, sound, type, language, emote, comment) VALUES
(2000020565,'Thank you, kind soul.',0,0,7,4,NULL),
(2000020566,'I\'ll never forget you, friend.',0,0,7,4,NULL),
(2000020567,'Finally! A hero has come!',0,0,7,4,NULL),
(2000020568,'Good of you to come, champion! The beast almost had me!',0,0,7,4,NULL);
